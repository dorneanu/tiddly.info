{
    "tiddlers": {
        "$:/plugins/bimlas/locator/README/CHANGELOG": {
            "title": "$:/plugins/bimlas/locator/README/CHANGELOG",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "Unreleased\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/master...dev]]\n\n!! 1.5.0\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/1.4.0...1.5.0]]\n\n* Move tiddler from current context to higher- or subtopic by drag-n-dropping in the Locator sidebar\n* Assign any tiddler to any of the titles in the Locator sidebar by drag-n-dropping\n* Show the (top-level) base tag to be able to move the tiddler titles there\n* Add button to open search results in advanced search\n* Show buttons using the Kin filter only when the filter operator is available\n* Fix related tag issue (not all of them were listed)\n* Fix whitespace issue\n* Refactor the code\n* Add tutorial to the demo\n\n!! 1.4.0\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.3.1...v1.4.0]]\n\n* When there was a space in the search string and \"new tiddler\" button is used from search, the tiddler title was encapsulated (`[[title with spaces]]`)\n* When there was a space in any of the breadcrumbs in sidebar and \"new tiddler\" button is used from it, the tiddler got all of the breadcrumb tags, the title with spaces was encapsulated (literally `[[title with spaces]]` tag)\n* Add more tips to [[$:/plugins/bimlas/locator/README/TIPS]]\n* Add descriptive tooltip to buttons\n\n!! 1.3.1\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.3.0...v1.3.1]]\n\n* Add base tag if there is no breadcrumbs when creating new tiddler in current context\n* Reword documentation\n\n!! 1.3.0\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.2.0...v1.3.0]]\n\n* Create new tiddler from search text\n\n!! 1.2.0\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.1.0...v1.2.0]]\n\n* Add button to create new tiddler in current context\n* Ability to use additional filter on tags\n\n!! 1.1.0\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.0.0...v1.1.0]]\n\n* ''I realized that most functions work without the `kin` filter''\n* Use the same \"style\" for breadcrumb- and list items\n* Show real tags instead of tag pills\n* Turn off filter of direct tag in the breadcrumbs by its tag icon\n* Ancestor tags in breadcrumbs of search are operating like direct labels, they can be removed one by one\n\n!! 1.0.0\n\n* First public release\n"
        },
        "$:/plugins/bimlas/locator/README/README": {
            "title": "$:/plugins/bimlas/locator/README/README",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "! Locator\n\nFor those who use many tags or store many different topics in a common wiki the Locator plugin is ''a table of contents widget and an enhanced search engine'' that gives you the opportunity to ''filter results by related tags without the need to write filters''. Unlike [[classic Table of Contents|https://tiddlywiki.com/#Table-of-Contents%20Macros%20(Examples)]], [[standard search|$:/core/ui/AdvancedSearch/Standard]] and [[list of tags|$:/core/ui/MoreSideBar/Tags]], this plugin offers these features in an organic, collaborative way.\n\n* https://gitlab.com/bimlas/tw5-locator (main repository)\n* https://github.com/bimlas/tw5-locator (mirror, ''please star if you like the plugin'')\n\n! Benefits compared to built-in solutions\n\n* ''Shows related tags''<br/>You can mark a tiddler with multiple tags, but in the classic ToC you don't see them while browsing, in Locator you can apply them as filters.\n* ''Easy way to search for tags''<br/>Find tags in the standard search based on part of their name or view the tags of the search results at a glance.\n* ''Limit the scope of search''<br/>You don't have to store your recipes and family tree in a separate wiki just to make them easier to find: you can define the scope of your search with some clicks (without the need to write filters in [[$:/AdvancedSearch]]).\n* ''Reorder the hierarchy with drag-n-drop''<br />You can easily move tiddlers between topics by drag-n-dropping them.\n* ''There is no need to include a table of contents in the main tiddler of each topic''<br/>Just press the \"Locator sidebar\" button on the tiddler's toolbar and you can browse it's children right away in the sidebar.\n* ''Create new tiddler in current scope''<br />The \"new tiddler\" button in Locator creates a new tiddler pre-tagged with the currently selected tags and named by the search query (like a special \"new here\" button).\n* ''Phone friendlier''<br/>The width of the classic ToC is increasing and the size of the text is decrasing as we move down in the context, while Locator remains readable.\n\n@@.bimlas-locator-warning\n''REQUIREMENT: The marked features require the `kin` filter operator'' (see on the other tabs): https://bimlas.gitlab.io/tw5-kin-filter<br />If this filter operator is unavailable, the relevant buttons will be hidden.\n@@\n\n! Installation instructions\n\n''The plugin consists of separate parts'' (see other tabs), each of them can be used on its own, so ''it is possible to use only the parts you like'', but they can be used most effectively together because ''they interact with each other''.\n\nTo add the plugin to your own ~TiddlyWiki5, just drag this link to the browser window and ''create the required tiddlers'':\n\n$:/plugins/bimlas/locator\n\nFor other installation options see the repositories above.\n\n//Select the next tab to continue.//\n"
        },
        "$:/plugins/bimlas/locator/README/TIPS": {
            "title": "$:/plugins/bimlas/locator/README/TIPS",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "! Tips\n\n!! Organic navigation\n\n* In `locator-tags`, look for a tag and apply it as an ancestor tag; the `locator-search` only affects tiddlers associated with it at any depth\n* Click on the tag in `locator-tags` and open its tiddler, then click on the \"locator sidebar\" button; the `locator-view` sidebar will show it's hierarchy\n* Navigate in the hierarchy of `locator-view` sidebar then search for a term in `locator-search`; pressing the \"copy context\" button restricting the search to the context of `locator-view` sidebar\n* If you cannot find what you are searching for, then you may want to create a new tiddler, use the \"new tiddler\" button in one of the Locator macros\n\n!! Taking good habits\n\n''To get the least chance of writing the same note you wrote earlier, look for a new tiddler before creating a note. To force yourself'', hide the \"new tiddler\" button inside the Page Toolbar and ''use the \"new tiddler\" button inside the Locator search'', so if you want to create a new tiddler you must first look for it. If you are absolutely sure that there is no tiddler yet and you need to create a new tiddler, this solution is also useful because search text defines the default name of the new tiddler.\n\n!! Let the \"Locator sidebar\" button automatically focus to the Locator sidebar\n\nFor example, the More -> Tags sidebar is currently open when we use the \"Locator sidebar\" toolbar button on one of the tiddlers, but we do not see the effect because the Locator sidebar is not visible, thus we need to modify to let button automatically open the corresponding sidebar.\n\n* If we don't know exactly, look for the sidebar tiddler's title (used as `text` parameter in the code below)\n** Open the Advanced Search -> Filter and look for the sidebar name in the `caption` field, for example `[caption[Locator]]` will result [[Locator view]]\n* Find the state tiddler that contains the sidebar tiddler's title (used as `$tiddler` parameter in the code below)\n** Open the Advanced Search -> Filter and look for `[text[Locator view]]` for example\n** Switch between Locator sidebar and another sidebar to see which state tiddler is changing, this is what we are looking for ([[$:/state/tab/sidebar--595412856]] for example)\n* Use the name of the state tiddler and the title of the sidebar in the code below and add this line to [[$:/plugins/bimlas/locator/viewtoolbar/open-in-sidebar]] tiddler\n\n```\n<!-- Original code of the button... -->\n...\n<$list filter=\"[all[current]is[tag]]\">\n<$button tooltip=\"Browse hierarchy of tag in Locator sidebar\" aria-label=\"locator sidebar\" class=<<tv-config-toolbar-class>>>\n<!-- ADD THIS LINE -->\n<$action-setfield $tiddler=\"$:/state/tab/sidebar--595412856\" text=\"Locator view\"/>\n```\n\nIf you rename the sidebar, you must also update this change! See [[this thread on Google Groups|https://groups.google.com/d/msg/tiddlywiki/xAe_fvhzoCY/UoKZc7ZZDQAJ]] for details.\n\n!! Speed up (on phones)\n\n!!! Conditional view\n\nBecause ''the plugin could be slow if `kin` filter is used'' (depending on the context) and since we don't look at the table of contents and search results at the same time, we can ''hide the Locator while we are using the standard search''.\n\nTo achieve this, place the Locator view in the following condition:\n\n```\n<$reveal type=\"match\" default=\"\" text={{{ [prefix[$:/state/popup/search-dropdown]] }}}>\n<<locator-view \"TableOfContents\">>\n</$reveal>\n```\n\n''When you open TiddlyWiki'', the search entry is in focus by default, so ''the Locator sidebar is not visible''. To fix this, change the text of [[$:/config/Search/AutoFocus]] [[hidden setting|https://tiddlywiki.com/#Hidden%20Setting%3A%20Search%20AutoFocus]] to `false`.\n\n!!! Prefer the standard search\n\n''Typing in the search entry could be slow'' because of the slowness of the `kin` filter (depending on the context). In this case, ''switch to the classic search listing'', enter the expression, and then return to the Locator search.\n\n//Select the next tab to continue.//\n"
        },
        "$:/plugins/bimlas/locator/README/search": {
            "title": "$:/plugins/bimlas/locator/README/search",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "! Usage of `locator-search` (customised search results)\n\n@@.bimlas-locator-warning.bimlas-locator-explanation\nFiltering by ancestor tags ({{$:/core/images/link}}) and searching in current context of sidebar ({{$:/core/images/close-others-button}}) requires the `kin` filter operator, filtering by direct tags ({{$:/core/images/tag-button}}) works without it!\n@@\n\nThe macro can be used in the same way as standard search, but ''you can narrow the scope of the search to the context defined by `locator-view` or `locator-tags`''.\n\n* Add a `locator-view` to the sidebar as described previously\n* Create a new tiddler\n* Add the [[$:/tags/SearchResults]] tag\n* Add the `caption` field to change the title of the tab (\"Locator\" for example)\n* Call the macro by placing this text in the tiddler:\n\n```\n<<locator-search>>\n```\n\n@@.bimlas-locator-explanation\nIf you type something in the standard search, you can see the newly created tiddler as a new tab in the search results. Use the {{$:/core/images/close-others-button}} button to ''restrict the search to the context of the Locator sidebar. For example if you opened the [[Family tree of Ford]] in the sidebar, pressing this button will restrict the search to all members of the Ford family.\n@@\n\nAdding additional tags or searching for intersection of any tags is possible in `locator-tags`.\n\n@@.bimlas-locator-explanation\n''Pressing {{$:/core/images/new-button}} creates a new tiddler with the currently selected tags whose default name will be the search text''\n@@\n\n//Select the next tab to continue.//\n"
        },
        "$:/plugins/bimlas/locator/README/tags": {
            "title": "$:/plugins/bimlas/locator/README/tags",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "! Usage of `locator-tags` (customised search results for tags)\n\n@@.bimlas-locator-warning.bimlas-locator-explanation\nFiltering by ancestor tags ({{$:/core/images/link}}) and searching in current context of sidebar ({{$:/core/images/close-others-button}}) requires the `kin` filter operator, filtering by direct tags ({{$:/core/images/tag-button}}) works without it!\n@@\n\nTake the same steps you did for `locator-search`, but use this code:\n\n```\n<<locator-tags>>\n```\n\n''Search for tags instead of tiddler titles'', the list of tags is structured as follows:\n\n<div class=\"tc-tiddler-frame bimlas-locator-explanation\">\n{{$:/core/images/new-button}} {{$:/core/images/close-others-button}} {{$:/core/images/advanced-search-button}} {{$:/core/images/close-button}} <br/>\n<$list filter=\"123\" variable=\"resultCount\" template=\"$:/language/Search/Matches\"/><br/>\n{{$:/core/images/link}} <<tag-pill \"Breadcrumb tag pills\">><br/>\n<hr/>\n//Title matches//<br/>\n{{$:/core/images/link}} {{$:/core/images/tag-button}} <<tag-pill \"Tags with matching titles\">><br/>\n//Related tags//<br/>\n{{$:/core/images/link}} {{$:/core/images/tag-button}} <<tag-pill \"Tags of search results...\">><br/>\n{{$:/core/images/link}} {{$:/core/images/tag-button}} <<tag-pill \"...expect breadcrumbs...\">><br/>\n{{$:/core/images/link}} {{$:/core/images/tag-button}} <<tag-pill \"...and listed titles\">><br/>\n</div>\n\n@@.bimlas-locator-explanation\n* {{$:/core/images/new-button}}: Create a new tiddler with the currently selected tags whose default name will be the search text\n* {{$:/core/images/close-button}}: Clear tag filters, search everywhere\n* {{$:/core/images/close-others-button}}: Restrict the search to the context of the Locator sidebar\n* {{$:/core/images/advanced-search-button}}: Copy the filter (including tags) to [[$:/AdvancedSearch]] to perform additional filtering\n* {{$:/core/images/link}}: Look for the search term under this tag at any depth (this ancestor tag is broadly defining the topic of the search)\n* {{$:/core/images/tag-button}}: Look for the search term in tiddlers directly tagged by this tag (direct tag)\n@@\n\nThe picked tags using to ''narrow the scope of `locator-search`'', clicking on the the tag itself shows the titles associated with this tag (usual tag-dropdown). The number of the matching tiddlers is shown on the top so you don't have to switch back and forth between `locator-search` and `locator-tags` tabs to see to see if you've narrowed down the list enough.\n\n''NOTE'': If you want to ''get all results related to the selected tags'', replace the search text with spaces, otherwise only those tiddlers will be listed which contains the text (for example a tiddler deeply in the TableOfContents does not contains the TableOfContents text).\n\n//Select the next tab to continue.//\n"
        },
        "$:/plugins/bimlas/locator/README/view": {
            "title": "$:/plugins/bimlas/locator/README/view",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "! Usage of `locator-view`\n\nThis is ''a [[Table of Contents macro|https://tiddlywiki.com/#Table-of-Contents%20Macros%20(Examples)]] that lets you navigate the wiki'' just as you would with a file manager on the file system. The macro can be placed anywhere you want, for example put it in the sidebar or in the main tiddler of each topic in your wiki.\n\n!! Features\n\n!!! Show non-visible tags\n\nFor example, the [[Henry Ford]] tiddler has the [[Family tree of Ford]] and [[President]] tags. In the classic table of contents, opening [[Family tree of Ford]] shows only [[Henry Ford]], but we do not see the [[President]] tag. The Locator lists this related tag, so ''we can easily filter the current context by additional tags''.\n\nIf you don't like this feature, you can disable by passing a special filter for tags (se bellow).\n\n!!! Open any tag in the sidebar\n\n@@.bimlas-locator-explanation\nThere is ''a new button in the toolbar of the tiddlers that are tagging other tiddlers'': by pressing the \"{{$:/core/images/chevron-right}} locator sidebar\" button, you can ''display the current tiddler's hierarchy in the Locator sidebar''.\n@@\n\nFor example, if we search for [[Henry Ford II]] in the standard search, open his tiddler and we want to browse its successors, pressing this button will show it in the Locator sidebar where we can view it as a table of contents.\n\nIf you do not want to leave this button in the toolbar, you can turn it off in the [[$:/ControlPanel]] -> Apperance -> Toolbars -> [[View Toolbar|$:/core/ui/ControlPanel/Toolbars/ViewToolbar]].\n\n!!! Reorganize hierarchy, move tiddler from current context to another by drag-n-dropping\n\n''Move the tiddlers between the topics as you do with files on the filesystem.'' For example, if you open the Animals tag in the Locator sidebar and the list includes Squirrel, Fox, and Mammals, dropping the Fox and Squirrel on the Mammals will remove the Animal (the last ancestor) tag and replace it with the Mammals. If you have Fish in the Mammals topic, you can easily place it in a higher context (Animals) by dropping it at the desired ancestor tag. This is ''useful if you want to re-organize your tiddlers by splitting a larger topic into several smaller topics''.\n\nYou can drag-n-drop any tiddler title (even from tiddler text) to the titles in the Locator sidebar to apply the target tag on it, so you can categorize the tiddlers without going through them in edit mode.\n\nIf you want to interrupt drag-n-dropping, press <kbd>Escape</kbd>.\n\n!! Create a Table of Contents sidebar\n\n* Create a new tiddler\n* Add the [[$:/tags/SideBar]] tag\n* Add the `caption` field to change the title of the tab (\"Contents\" for example)\n* Place the `locator-view` macro call in it:\n\n```\n<<locator-view baseTitle:\"TableOfContents\">>\n```\n\n!! The table of contents is structured as follows\n\n<div class=\"tc-tiddler-frame bimlas-locator-explanation\">\n{{$:/core/images/new-button}} {{$:/core/images/close-button}}<br/>\n{{$:/core/images/right-arrow}} Ancestor tags<br/>\n{{$:/core/images/right-arrow}} (Previously opened parents, breadcrumbs)<br/>\n<hr/>\n{{$:/core/images/tag-button}} <<tag-pill \"Direct tags\">><br/>\n{{$:/core/images/tag-button}} <<tag-pill \"(Tags of listed titles...)\">><br/>\n{{$:/core/images/tag-button}} <<tag-pill \"(...expect ancestor tags...)\">><br/>\n{{$:/core/images/tag-button}} <<tag-pill \"(...and listed titles)\">><br/>\n{{$:/core/images/blank}} Title without button<br/>\n{{$:/core/images/blank}} (Normal list item)<br/>\n{{$:/core/images/right-arrow}} Title with button (ancestor tag)<br/>\n{{$:/core/images/right-arrow}} (Parent of other titles)<br/>\n</div>\n\n@@.bimlas-locator-explanation\n* {{$:/core/images/right-arrow}}: Move in to the context (show children of title)\n* {{$:/core/images/tag-button}}: Toggle filtering the list to this tag\n* {{$:/core/images/new-button}}: Create new tiddler in the current context: apply the parent of the current view (the last ancestor tag) and the direct tags below it (like a special \"new here\" button)\n* {{$:/core/images/close-button}}: Go back to the default context (if it's overridden by the \"show in Locator sidebar\" button)\n* Click on titles to open the tiddlers\n@@\n\n!! Pass additional filter\n\nYou can also ''pass a filter parameter to modify the list of items''. For example we sort them according to the last modification in reverse order.\n\n```\n<<locator-view baseTitle:\"TableOfContents\" finalFilter:\"+[sort[modified]reverse[]]\">>\n```\n\n''Filter items that can be found deeper in the hierarchy (remove duplicate entries)'' with the `filter-grandchildren` predefined filter expression.\n\n@@.bimlas-locator-warning\nThe `filter-grandchildren` requires the `kin` filter operator, besides this it could be slow!\n@@\n\n```\n<<locator-view baseTitle:\"TableOfContents\" finalFilter:\"+[!subfilter<filter-grandchildren>]\">>\n```\n\n!! Additional filter for tags\n\nUse it for example to sort tags by color.\n\n```\n<<locator-view baseTitle:\"TableOfContents\" tagFilter:\"+[sort[color]]\">>\n```\n\nIf you only want to see the \"classic\" tags (\"labels\", \"hashtags\") which are used to group notes without moving them to sub hierarchies, you can use one of the following filters.\n\n```\n<<locator-view baseTitle:\"TableOfContents\" tagFilter:\"-[has[text]]\">>\n\n<<locator-view baseTitle:\"TableOfContents\" tagFilter:\"-[has[tags]]\">>\n\n<<locator-view baseTitle:\"TableOfContents\" tagFilter:\"-[kin::to[TableOfContents]]\">>\n```\n\n@@.bimlas-locator-warning\nThe latter filter requires the `kin` filter operator, besides this it could be slow!\n@@\n\n!! Hide related tags\n\nIf you don't want to see related tags, just enter a tag filter term that is sure to filter everything out. For example:\n\n```\n<<locator-view baseTitle:\"TableOfContents\" tagFilter:\"+[has[PLEASE HIDE RELATED TAGS]]\">>\n```\n\n//Select the next tab to continue.//\n"
        },
        "$:/plugins/bimlas/locator/actions/add-ancestor-tag": {
            "title": "$:/plugins/bimlas/locator/actions/add-ancestor-tag",
            "tags": "$:/tags/Actions",
            "type": "text/vnd.tiddlywiki",
            "text": "<$action-listops $tiddler=<<contextState>> $field=\"breadcrumbs\" $subfilter=\"[all[current]]\"/>\n<$action-listops $tiddler=<<contextState>> $field=\"ancestor-tags\" $subfilter=\"[all[current]]\"/>\n"
        },
        "$:/plugins/bimlas/locator/actions/add-direct-tag": {
            "title": "$:/plugins/bimlas/locator/actions/add-direct-tag",
            "tags": "$:/tags/Actions",
            "type": "text/vnd.tiddlywiki",
            "text": "<$action-listops $tiddler=<<contextState>> $field=\"breadcrumbs\" $subfilter=\"[all[current]]\"/>\n"
        },
        "$:/plugins/bimlas/locator/actions/move-to-another-context": {
            "title": "$:/plugins/bimlas/locator/actions/move-to-another-context",
            "tags": "$:/tags/Actions",
            "type": "text/vnd.tiddlywiki",
            "text": "<$set name=\"lastAncestorTag\" value={{{ [subfilter<filter-ancestor-tags>last[]] }}}>\n  <$fieldmangler tiddler=<<actionTiddler>>>\n    <$action-sendmessage $message=\"tm-remove-tag\" $param=<<lastAncestorTag>>/>\n    <$action-sendmessage $message=\"tm-add-tag\" $param=<<currentTiddler>>/>\n  </$fieldmangler>\n</$set>\n"
        },
        "$:/plugins/bimlas/locator/buttons/add-ancestor-tag-filter": {
            "title": "$:/plugins/bimlas/locator/buttons/add-ancestor-tag-filter",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=\"Look for successors of the tag at any depth\" class=\"tc-btn-invisible bimlas-locator\" actions={{$:/plugins/bimlas/locator/actions/add-ancestor-tag}}>\n  {{$:/core/images/link}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/buttons/add-direct-tag-filter": {
            "title": "$:/plugins/bimlas/locator/buttons/add-direct-tag-filter",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=\"Look for tiddlers having this tag\" class=\"tc-btn-invisible bimlas-locator\" actions={{$:/plugins/bimlas/locator/actions/add-direct-tag}}>\n  {{$:/core/images/tag-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/buttons/clear-context": {
            "title": "$:/plugins/bimlas/locator/buttons/clear-context",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=<<tooltip-for-clear-context>> class=\"tc-btn-invisible bimlas-locator\">\n  <$action-deletetiddler $tiddler=<<contextState>>/>\n  {{$:/core/images/close-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/buttons/copy-context-from-sidebar": {
            "title": "$:/plugins/bimlas/locator/buttons/copy-context-from-sidebar",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=\"Search in the context of Locator sidebar in any depth\" class=\"tc-btn-invisible bimlas-locator\">\n  <!--\n  Copy the breadcrumbs from the Locator sidebar; interpret each tag as an\n  ancestor tag, otherwise there would be no results for too many direct tags.\n  -->\n  <$set name=\"searchContextState\" value=<<contextState>>>\n    <$set name=\"contextState\" value=\"$:/state/bimlas/locator\">\n      <$set name=\"lastAncestorTag\" value={{{ [subfilter<filter-ancestor-tags>last[]] }}}>\n        <$set name=\"tagsOfCurrentContext\" filter=\"[subfilter<filter-breadcrumbs>] -[subfilter<filter-breadcrumbs>allbefore<lastAncestorTag>]\">\n          <$action-listops $tiddler=<<searchContextState>> $field=\"breadcrumbs\" $filter=<<tagsOfCurrentContext>>/>\n          <$action-listops $tiddler=<<searchContextState>> $field=\"ancestor-tags\" $filter=<<tagsOfCurrentContext>>/>\n        </$set>\n      </$set>\n    </$set>\n  </$set>\n  {{$:/core/images/close-others-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/buttons/copy-filter-to-advanced-search": {
            "title": "$:/plugins/bimlas/locator/buttons/copy-filter-to-advanced-search",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<!--\nSince the search term may contain characters that affect the filter, I\ndo not copy the search term, I just refer to the tiddler.\n-->\n<$wikify name=\"filter\" text=<<wikify-filter-search-context preFilter:\"search\">>>\n  <$button tooltip=\"Continue filtering in advanced search\" class=\"tc-btn-invisible bimlas-locator\">\n    <$action-setfield $tiddler=\"$:/temp/advancedsearch\" text=<<filter>>/>\n    <$action-setfield $tiddler=\"$:/state/tab--1498284803\" text=\"$:/core/ui/AdvancedSearch/Filter\"/>\n    <$action-navigate $to=\"$:/AdvancedSearch\"/>\n    {{$:/core/images/advanced-search-button}}\n  </$button>\n</$wikify>\n"
        },
        "$:/plugins/bimlas/locator/buttons/create-new-tiddler": {
            "title": "$:/plugins/bimlas/locator/buttons/create-new-tiddler",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=\"Create new tiddler in the current context\" class=\"tc-btn-invisible bimlas-locator\">\n  <$set name=\"lastAncestorTag\" value={{{ [subfilter<filter-ancestor-tags>last[]] }}}>\n    <$set name=\"tagsOfCurrentContext\" filter=\"[subfilter<filter-breadcrumbs>] -[subfilter<filter-breadcrumbs>allbefore<lastAncestorTag>]\">\n      <$action-sendmessage $message=\"tm-new-tiddler\" title=<<titleOfNewTiddler>> tags=<<tagsOfCurrentContext>>/>\n    </$set>\n  </$set>\n  {{$:/core/images/new-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/buttons/go-down-to-context": {
            "title": "$:/plugins/bimlas/locator/buttons/go-down-to-context",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$list filter=\"[all[current]is[tag]]\">\n  <$button tooltip=\"Go to context, show tiddlers tagged by this\" class=\"tc-btn-invisible bimlas-locator\" actions={{$:/plugins/bimlas/locator/actions/add-ancestor-tag}}>\n    {{$:/core/images/right-arrow}}\n  </$button>\n</$list>\n<$list filter=\"[all[current]!is[tag]]\">\n  <$button class=\"tc-btn-invisible bimlas-locator\">\n    {{$:/core/images/blank}}\n  </$button>\n</$list>\n"
        },
        "$:/plugins/bimlas/locator/buttons/go-up-to-context": {
            "title": "$:/plugins/bimlas/locator/buttons/go-up-to-context",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=\"Go to context, show tiddlers tagged by this\" class=\"tc-btn-invisible bimlas-locator\">\n  <$set name=\"breadcrumbsUntilCurrent\" filter=\"[subfilter<filter-breadcrumbs>allbefore<currentTiddler>] [all[current]]\">\n    <$action-listops $tiddler=<<contextState>> $field=\"ancestor-tags\" $subfilter=\"-[!enlist<breadcrumbsUntilCurrent>]\"/>\n    <$action-listops $tiddler=<<contextState>> $field=\"breadcrumbs\" $filter=<<breadcrumbsUntilCurrent>>/>\n  </$set>\n  {{$:/core/images/right-arrow}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/buttons/remove-ancestor-tag-filter": {
            "title": "$:/plugins/bimlas/locator/buttons/remove-ancestor-tag-filter",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=\"Remove filtering to this tag\" class=\"tc-btn-invisible bimlas-locator\">\n  <$action-listops $tiddler=<<contextState>> $field=\"breadcrumbs\" $subfilter=\"-[all[current]]\"/>\n  <$action-listops $tiddler=<<contextState>> $field=\"ancestor-tags\" $subfilter=\"-[all[current]]\"/>\n  {{$:/core/images/link}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/buttons/remove-direct-tag-filter": {
            "title": "$:/plugins/bimlas/locator/buttons/remove-direct-tag-filter",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button tooltip=\"Remove filtering to this tag\" class=\"tc-btn-invisible bimlas-locator\">\n  <$action-listops $tiddler=<<contextState>> $field=\"breadcrumbs\" $subfilter=\"-[all[current]]\"/>\n  {{$:/core/images/tag-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/locator/macros/filters": {
            "title": "$:/plugins/bimlas/locator/macros/filters",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "\\define filter-kin-filteroperator-available() [[$:/plugins/bimlas/kin-filter]is[tiddler]]\n\\define filter-base-title() [title<contextState>each:list-item[base-title]] ~[<__baseTitle__>]\n\\define filter-breadcrumbs() [subfilter<filter-base-title>] [title<contextState>each:list-item[breadcrumbs]] -[[]]\n\\define filter-ancestor-tags() [subfilter<filter-base-title>] [title<contextState>each:list-item[ancestor-tags]] -[[]]\n\\define filter-grandchildren() [subfilter<filter-ancestor-tags>last[]tagging[]tagging[]kin::to[]]\n\\define wikify-filter-search-context(preFilter, postFilter)\n  <$text text=\"[!is[system]\"/><$list filter=<<filter-ancestor-tags>>><$text text=\"kin::to[\"/><$view field=\"title\"/><$text text=\"]\"/></$list><$list filter=\"[subfilter<filter-breadcrumbs>] -[subfilter<filter-ancestor-tags>]\"><$text text=\"tag[\"/><$view field=\"title\"/><$text text=\"]\"/></$list><$text text=\"$preFilter${$(searchTiddler)$}$postFilter$]\"/>\n\\end\n\\define wikify-filter-context-items()\n  <$set name=\"lastAncestorTag\" value={{{ [subfilter<filter-ancestor-tags>last[]] }}}>\n  <!-- Do not use `allafter:include[]` to keep 5.1.18 compatibility, see https://github.com/Jermolene/TiddlyWiki5/issues/3962 -->\n    <$text text=\"[!has[draft.of]\"/><$list filter=\"[<lastAncestorTag>] [subfilter<filter-breadcrumbs>allafter<lastAncestorTag>]\">tag[<$view field=\"title\"/>]</$list><$text text=\"] \"/><$text text=<<__finalFilter__>>/>\n  </$set>\n\\end\n"
        },
        "$:/plugins/bimlas/locator/macros/locator-search": {
            "title": "$:/plugins/bimlas/locator/macros/locator-search",
            "tags": "$:/tags/Macro",
            "type": "text/vnd.tiddlywiki",
            "text": "\\define locator-search(locatorViewTiddler: \"\")\n  <!-- Hide internal macros, do not make them globally available -->\n  <$importvariables filter=\"[[$:/plugins/bimlas/locator/macros/filters]]\">\n    <$set name=\"contextState\" value=\"$:/state/bimlas/locator-search\">\n\n      {{$:/plugins/bimlas/locator/templates/search-toolbar}}\n\n      <$wikify name=\"filter\" text=<<wikify-filter-search-context preFilter:\"search\" postFilter:\"count[]\">>>\n        <$list filter=<<filter>> variable=\"resultCount\" template=\"$:/language/Search/Matches\"/>\n      </$wikify>\n\n      {{$:/plugins/bimlas/locator/templates/breadcrumbs}}\n\n      //<small>{{$:/language/Search/Matches/Title}}</small>//\n\n      <$wikify name=\"filter\" text=<<wikify-filter-search-context preFilter:\"search:title\" postFilter:\"limit[250]\">>>\n        <$list filter=<<filter>> template=\"$:/core/ui/ListItemTemplate\"/>\n      </$wikify>\n\n      //<small>{{$:/language/Search/Matches/All}}</small>//\n\n      <$wikify name=\"filter\" text=<<wikify-filter-search-context preFilter:\"search\" postFilter:\"limit[250]\">>>\n        <$list filter=<<filter>> template=\"$:/core/ui/ListItemTemplate\"/>\n      </$wikify>\n\n    </$set>\n  </$importvariables>\n\\end\n"
        },
        "$:/plugins/bimlas/locator/macros/locator-tags": {
            "title": "$:/plugins/bimlas/locator/macros/locator-tags",
            "tags": "$:/tags/Macro",
            "type": "text/vnd.tiddlywiki",
            "text": "\\define locator-tags(locatorViewTiddler: \"\")\n  <!-- Hide internal macros, do not make them globally available -->\n  <$importvariables filter=\"[[$:/plugins/bimlas/locator/macros/filters]]\">\n    <$set name=\"contextState\" value=\"$:/state/bimlas/locator-search\">\n      <$set name=\"redunantDirectTags\" value=\"[title<contextState>each:list-item[breadcrumbs]]\">\n\n        {{$:/plugins/bimlas/locator/templates/search-toolbar}}\n\n        <$wikify name=\"filter\" text=<<wikify-filter-search-context preFilter:\"search\" postFilter:\"count[]\">>>\n          <$list filter=<<filter>> variable=\"resultCount\" template=\"$:/language/Search/Matches\"/>\n        </$wikify>\n\n        {{$:/plugins/bimlas/locator/templates/breadcrumbs}}\n\n        //<small>{{$:/language/Search/Matches/Title}}</small>//\n\n        <$wikify name=\"filter\" text=<<wikify-filter-search-context preFilter:\"tags[]!subfilter<redunantDirectTags>search:title\" postFilter:\"sort[title]limit[250]\">>>\n          <$list filter=<<filter>>>\n            {{||$:/plugins/bimlas/locator/templates/tag-search-list-item}}\n          </$list>\n        </$wikify>\n\n        //<small>Related tags</small>//\n\n        <$wikify name=\"filter\" text=<<wikify-filter-search-context preFilter:\"search\" postFilter:\"tags[]!subfilter<redunantDirectTags>sort[title]limit[250]\">>>\n          <$list filter=<<filter>>>\n            {{||$:/plugins/bimlas/locator/templates/tag-search-list-item}}\n          </$list>\n        </$wikify>\n\n      </$set>\n    </$set>\n  </$importvariables>\n\\end\n"
        },
        "$:/plugins/bimlas/locator/macros/locator-view": {
            "title": "$:/plugins/bimlas/locator/macros/locator-view",
            "tags": "$:/tags/Macro",
            "type": "text/vnd.tiddlywiki",
            "text": "\\define locator-view(baseTitle finalFilter=\"\" tagFilter=\"\")\n  <!-- Hide internal macros, do not make them globally available -->\n  <$importvariables filter=\"[[$:/plugins/bimlas/locator/macros/filters]]\">\n    <!-- If `currentTiddler` is empty (in the sidebar for example), then do not add trailing `/` -->\n    <$set name=\"contextState\" value={{{ [all[current]] -[[]] +[addprefix[$:/state/bimlas/locator/]] [[$:/state/bimlas/locator]] +[first[]] }}}>\n      <div class=\"tc-table-of-contents\">\n\n        {{||$:/plugins/bimlas/locator/buttons/create-new-tiddler}} <$list filter=\"[title<contextState>get[base-title]]\"><$set name=\"tooltip-for-clear-context\" value=\"Go back to the default context\">\n          {{$:/plugins/bimlas/locator/buttons/clear-context}}\n        </$set></$list>\n\n        {{$:/plugins/bimlas/locator/templates/breadcrumbs}}\n\n        ---\n\n        <$wikify name=\"filterContextItems\" text=<<wikify-filter-context-items>>>\n          <ol>\n            <$set name=\"lastAncestorTag\" value={{{ [subfilter<filter-ancestor-tags>last[]] }}}>\n              <!-- Do not use `allafter:include[]` to keep 5.1.18 compatibility, see https://github.com/Jermolene/TiddlyWiki5/issues/3962 -->\n              <$list filter=\"\"\"[subfilter<filterContextItems>tags[]!subfilter<filterContextItems>] -[subfilter<filter-breadcrumbs>allafter<lastAncestorTag>] -[<lastAncestorTag>] +[sort[title]] $tagFilter$\"\"\">\n                <li class=\"toc-item bimlas-locator\">\n                    {{||$:/plugins/bimlas/locator/buttons/add-direct-tag-filter}} <<tag>>\n                </li>\n              </$list>\n            </$set>\n            <$list filter=<<filterContextItems>>>\n              <$droppable actions={{$:/plugins/bimlas/locator/actions/move-to-another-context}}>\n                <li class=\"toc-item tc-droppable-placeholder bimlas-locator\" style=\"display: block\">\n                  {{||$:/plugins/bimlas/locator/buttons/go-down-to-context}} <$link to=<<currentTiddler>>><$transclude field=\"caption\"><$view field=\"title\"/></$transclude></$link>\n                </li>\n              </$droppable>\n            </$list>\n          </ol>\n        </$wikify>\n\n      </div>\n    </$set>\n  </$importvariables>\n\\end\n"
        },
        "$:/plugins/bimlas/locator/stylesheet": {
            "title": "$:/plugins/bimlas/locator/stylesheet",
            "tags": "$:/tags/Stylesheet",
            "type": "text/vnd.tiddlywiki",
            "text": ".bimlas-locator-warning {\n  color: red;\n  font-weight: bold;\n}\n.tc-tiddler-frame.bimlas-locator-explanation {\n  max-width: 400px;\n}\n.bimlas-locator-explanation svg {\n  width: 1rem;\n  height: 1rem;\n}\n.tc-drop-down button.bimlas-locator {\n  width: auto;\n  padding: 0;\n  display: inline-block;\n  background-color: inherit;\n}\nli.toc-item.bimlas-locator, .tc-menu-list-item.bimlas-locator {\n  margin-top: 3px;\n  margin-bottom: 0;\n}\n"
        },
        "$:/plugins/bimlas/locator/templates/breadcrumbs": {
            "title": "$:/plugins/bimlas/locator/templates/breadcrumbs",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "\\define ancestor-tag-in-search()\n  {{||$:/plugins/bimlas/locator/buttons/remove-ancestor-tag-filter}}\n  <<tag>>\n\\end\n\n\\define ancestor-tag-in-view()\n  <$droppable actions={{$:/plugins/bimlas/locator/actions/move-to-another-context}}>\n    <div class=\"tc-droppable-placeholder\" style=\"display: block\">\n      {{||$:/plugins/bimlas/locator/buttons/go-up-to-context}}\n      <$link to=<<currentTiddler>>>\n        <$transclude field=\"caption\"><$view field=\"title\"/></$transclude>\n      </$link>\n    </div>\n  </$droppable>\n\\end\n\n<$set name=\"ancestorTag\" filter=\"[<contextState>contains:title[$:/state/bimlas/locator-search]]\" value=<<ancestor-tag-in-search>> emptyValue=<<ancestor-tag-in-view>>>\n  <$list filter=<<filter-breadcrumbs>>>\n    <div class=\"tc-menu-list-item bimlas-locator\">\n      <$list filter=\"[subfilter<filter-ancestor-tags>is[current]]\">\n        <<ancestorTag>>\n      </$list>\n      <$list filter=\"[all[current]] -[subfilter<filter-ancestor-tags>]\">\n        {{||$:/plugins/bimlas/locator/buttons/remove-direct-tag-filter}}\n        <<tag>>\n      </$list>\n    </div>\n  </$list>\n</$set>\n"
        },
        "$:/plugins/bimlas/locator/templates/search-toolbar": {
            "title": "$:/plugins/bimlas/locator/templates/search-toolbar",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "\\define tooltip-for-clear-context() Remove filters\n\n<$set name=\"tooltip-for-clear-context\" value=\"Remove filters\">\n  <$set name=\"titleOfNewTiddler\" value={{$:/temp/search}}>\n    {{$:/plugins/bimlas/locator/buttons/create-new-tiddler}}\n  </$set>\n  <$list filter=<<filter-kin-filteroperator-available>> variable=\"doNotOverrideCurrent\">\n    {{$:/plugins/bimlas/locator/buttons/copy-context-from-sidebar}}\n  </$list>\n  {{$:/plugins/bimlas/locator/buttons/copy-filter-to-advanced-search}}\n  <$list filter=\"[<contextState>get[breadcrumbs]first[]]\">{{$:/plugins/bimlas/locator/buttons/clear-context}}</$list>\n</$set>\n"
        },
        "$:/plugins/bimlas/locator/templates/tag-search-list-item": {
            "title": "$:/plugins/bimlas/locator/templates/tag-search-list-item",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<div class=\"tc-menu-list-item bimlas-locator\">\n  <$list filter=<<filter-kin-filteroperator-available>> variable=\"doNotOverrideCurrent\">\n    {{||$:/plugins/bimlas/locator/buttons/add-ancestor-tag-filter}}\n  </$list>\n  {{||$:/plugins/bimlas/locator/buttons/add-direct-tag-filter}}\n  <$action-navigate $to=<<currentTiddler>>/>\n  <<tag>>\n</div>\n"
        },
        "$:/plugins/bimlas/locator/viewtoolbar/open-in-sidebar": {
            "title": "$:/plugins/bimlas/locator/viewtoolbar/open-in-sidebar",
            "tags": "$:/tags/ViewToolbar",
            "type": "text/vnd.tiddlywiki",
            "caption": "{{$:/core/images/chevron-right}} locator sidebar",
            "description": "Browse hierarchy of tag in Locator sidebar",
            "list-before": "$:/core/ui/Buttons/open-window",
            "text": "\\whitespace trim\n<$list filter=\"[all[current]is[tag]]\">\n<$button tooltip=\"Browse hierarchy of tag in Locator sidebar\" aria-label=\"locator sidebar\" class=<<tv-config-toolbar-class>>>\n<$action-listops $tiddler=\"$:/state/bimlas/locator\" $field=\"base-title\" $filter=\"[all[current]]\"/>\n<$action-listops $tiddler=\"$:/state/bimlas/locator\" $field=\"breadcrumbs\" $filter=[[]]/>\n<$action-listops $tiddler=\"$:/state/bimlas/locator\" $field=\"ancestor-tags\" $filter=[[]]/>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\" variable=\"listItem\">\n{{$:/core/images/chevron-right}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\">\n<$text text=\" \"/>\n<$text text=\"locator sidebar\"/>\n</span>\n</$list>\n</$button>\n</$list>\n"
        }
    }
}